<div *ngIf="!sprintTasksManagementService?.sprint"><h2>{{ 'loading' | translate }}...</h2></div>
<div *ngIf="sprintTasksManagementService?.sprint">
	<h1>Tasks management - {{ sprintTasksManagementService.sprint.name }}</h1>

    <div class="row margin-bottom-20px">
        <div class="col-xs-12">
            <button type="button" 
                class="btn btn-default"
                routerLink="/sprints">
				<span class="fa fa-chevron-left"></span>
                <span class="hidden-xs">{{ 'sprints.list' | translate }}</span>
            </button>
            
        </div>
    </div>
	
	<p>
		Date: <b>{{ sprintTasksManagementService.date }}</b>
	</p>

	<!--<p [innerHtml]="sprintTasksManagementService.users | debug"></p>-->

	<div *ngFor="let user of sprintTasksManagementService.users" class="TasksManagement">
		<h3 class="info-color">
			{{ user.name }}
			<button type="button" class="btn btn-link TasksManagement-Add">
				<span class="TasksManagement-Add-Container">
					<span class="fa fa-plus-circle TasksManagement-Add-Container-Icon"></span>
					<span class="hidden-xs TasksManagement-Add-Container-Label">
						{{ 'add.task' | translate }}
					</span>
				</span>
			</button>
		</h3>
		<table class="table table-striped table-bordered table-hover table-condensed table-responsive">
			<thead>
				<tr>
					<th width="30%">{{ 'task' | translate }}</th>
					<th width="10%" class="hidden-xs">{{ 'initital.duration' | translate }}</th>
					<th width="10%" class="hidden-xs">{{ 'remaining.duration' | translate }}</th>
					<th width="10%">{{ 'worked.hours' | translate }}</th>
					<th width="10%">{{ 'decrement.hours' | translate }}</th>
					<th width="10%" class="hidden-xs">{{ 'difference' | translate }}</th>
					<th width="10%">{{ 'perf' | translate }}</th>
					<th width="10%">{{ 'action' | translate }}</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let task of user.tasks">
					<td align="left" valign="middle">{{ task.name }}</td>
					<td align="right" valign="middle" class="hidden-xs">{{ task.initialDuration | duration:'hour' }}</td>
					<td align="right" valign="middle" class="hidden-xs">{{ task.remainingDuration | duration:'hour' }}</td>
					<td align="right" valign="middle">{{ task.duration | duration:'hour' }}</td>
					<td align="right" valign="middle">{{ task.workedDuration | duration:'hour' }}</td>
					<td align="right" valign="middle" class="hidden-xs">{{ task.difference | duration:'hour' }}</td>
					<td align="right" valign="middle">{{ task.performance | percentFr:0 }}</td>
					<td align="center" valign="middle">
						<button type="button" class="btn btn-warning"
                                [routerLink]="['/sprints', sprintId, 'tasks-management', 'edit']">
							<span class="fa fa-pencil"></span>
						</button>
					</td>
				</tr>
			</tbody>
			<tfoot>
				<tr>
					<th width="50%" colspan="3" class="hidden-xs">{{ 'total' | translate }}</th>
					<th width="50%" class="visible-xs">{{ 'total' | translate }}</th>
					<th></th>
					<th></th>
					<th></th>
					<th class="hidden-xs"></th>
					<th></th>
				</tr>
			</tfoot>
		</table>
	</div>

    <div class="row margin-bottom-20px">
        <div class="col-xs-12">
            <button type="button" 
                class="btn btn-default"
                routerLink="/sprints">
				<span class="fa fa-chevron-left"></span>
                <span class="hidden-xs">{{ 'sprints.list' | translate }}</span>
            </button>
        </div>
    </div>
</div>
